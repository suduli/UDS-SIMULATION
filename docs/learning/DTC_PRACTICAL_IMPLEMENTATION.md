# DTC - Practical Implementation Guide

**Document Version**: 1.0  
**Last Updated**: October 12, 2025  
**Format**: Visual Diagrams (No Code)  
**ISO Reference**: ISO 14229-1:2020, SAE J2012

---

## ğŸ“‹ Table of Contents

1. [DTC Detection and Storage Flow](#dtc-detection-and-storage-flow)
2. [Status Byte Management](#status-byte-management)
3. [Freeze Frame Capture Logic](#freeze-frame-capture-logic)
4. [Extended Data Management](#extended-data-management)
5. [Memory Management Strategies](#memory-management-strategies)
6. [Testing Scenarios](#testing-scenarios)
7. [Debugging Flowcharts](#debugging-flowcharts)
8. [Best Practices Checklist](#best-practices-checklist)

---

## DTC Detection and Storage Flow

### Complete Detection Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DTC DETECTION AND STORAGE FLOW                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SENSOR     â”‚
                    â”‚  READING    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”Œâ”€â”€â”€â”€â”¤ Diagnostic Test â”‚â”€â”€â”€â”€â”
             â”‚    â”‚  Execution      â”‚    â”‚
             â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
             â”‚                           â”‚
            FAIL                       PASS
             â”‚                           â”‚
             â–¼                           â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Check: DTC  â”‚            â”‚ Check: Any  â”‚
      â”‚ exists?     â”‚            â”‚ pending DTC?â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚       YES              NO
   NO                YES       â”‚                 â”‚
    â”‚                 â”‚        â–¼                 â–¼
    â–¼                 â–¼   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ Clear   â”‚      â”‚ No      â”‚
â”‚ Create â”‚      â”‚ Update â”‚â”‚ Pending â”‚      â”‚ Action  â”‚
â”‚ Pendingâ”‚      â”‚ Status â”‚â”‚ Status  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ DTC    â”‚      â”‚ to 0x09â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚               â”‚
    â”‚               â–¼
    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      â”‚ Check: 2nd fail?â”‚
    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚
    â”‚          â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         YES       NO
    â”‚          â”‚         â”‚
    â–¼          â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status â”‚ â”‚Confirm â”‚ â”‚Keep as â”‚
â”‚= 0x04  â”‚ â”‚DTC     â”‚ â”‚0x09    â”‚
â”‚Set bit2â”‚ â”‚Status= â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â”‚0x08/09 â”‚
     â”‚     â”‚Capture â”‚
     â”‚     â”‚Freeze  â”‚
     â”‚     â”‚Frame   â”‚
     â”‚     â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Store in     â”‚
                   â”‚ Non-volatile â”‚
                   â”‚ Memory       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Update       â”‚
                   â”‚ Extended Dataâ”‚
                   â”‚ (Counters)   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Diagnostic Test Execution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DIAGNOSTIC TEST TYPES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CONTINUOUS TESTS (Run constantly while engine running)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Misfire Detection                                    â”‚  â”‚
â”‚  â”‚ â€¢ Monitors crankshaft position                       â”‚  â”‚
â”‚  â”‚ â€¢ Detects irregular acceleration                     â”‚  â”‚
â”‚  â”‚ â€¢ Frequency: Every engine revolution                 â”‚  â”‚
â”‚  â”‚ â€¢ Threshold: >5% misfire rate triggers DTC           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Fuel System Monitoring                               â”‚  â”‚
â”‚  â”‚ â€¢ Checks fuel trim values                            â”‚  â”‚
â”‚  â”‚ â€¢ Frequency: Every 100ms                             â”‚  â”‚
â”‚  â”‚ â€¢ Threshold: Â±25% trim triggers DTC                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NON-CONTINUOUS TESTS (Run under specific conditions)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Catalyst Efficiency Monitor                          â”‚  â”‚
â”‚  â”‚ Enabling Criteria:                                   â”‚  â”‚
â”‚  â”‚   â€¢ Engine warmed up (>70Â°C)                         â”‚  â”‚
â”‚  â”‚   â€¢ Vehicle speed 40-100 km/h                        â”‚  â”‚
â”‚  â”‚   â€¢ Steady cruise (no acceleration)                  â”‚  â”‚
â”‚  â”‚   â€¢ Duration: 2+ minutes                             â”‚  â”‚
â”‚  â”‚ Frequency: Once per drive cycle (if conditions met)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ EVAP System Test                                     â”‚  â”‚
â”‚  â”‚ Enabling Criteria:                                   â”‚  â”‚
â”‚  â”‚   â€¢ Fuel level 15-85%                                â”‚  â”‚
â”‚  â”‚   â€¢ Engine off soak (8+ hours)                       â”‚  â”‚
â”‚  â”‚   â€¢ Ambient temp 4-35Â°C                              â”‚  â”‚
â”‚  â”‚ Frequency: Typically once per day                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Test Decision Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚ Test Enabled?â”‚                                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚          â”‚                                                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                             â”‚
â”‚    YES       NO                                             â”‚
â”‚     â”‚         â”‚                                             â”‚
â”‚     â–¼         â–¼                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚ â”‚Execute â”‚ â”‚Set Statusâ”‚                                     â”‚
â”‚ â”‚ Test   â”‚ â”‚Bit 1 or 6â”‚                                     â”‚
â”‚ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚(Not      â”‚                                     â”‚
â”‚     â”‚      â”‚Complete) â”‚                                     â”‚
â”‚     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚     â–¼                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚ â”‚Result? â”‚                                                  â”‚
â”‚ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                  â”‚
â”‚     â”‚                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”´â”€â”€â”€â”                                                   â”‚
â”‚PASS   FAIL                                                  â”‚
â”‚ â”‚      â”‚                                                    â”‚
â”‚ â–¼      â–¼                                                    â”‚
â”‚Clear  Store                                                 â”‚
â”‚Bits   DTC                                                   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Status Byte Management

### Status Bit Update Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STATUS BYTE UPDATE FLOWCHART                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 1: First Test Failure
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Initial State: Status = 0x00 (All bits clear)              â”‚
â”‚                                                              â”‚
â”‚  Test Fails                                                  â”‚
â”‚     â”‚                                                         â”‚
â”‚     â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Set Bit 0: Test Failed (Current)     â”‚ = 0x01            â”‚
â”‚  â”‚ Set Bit 1: Test Failed This Cycle    â”‚ = 0x03            â”‚
â”‚  â”‚ Set Bit 2: Pending DTC               â”‚ = 0x07            â”‚
â”‚  â”‚ Set Bit 4: Not Complete Since Clear  â”‚ = 0x17            â”‚
â”‚  â”‚ Set Bit 5: Failed Since Clear        â”‚ = 0x37            â”‚
â”‚  â”‚ Set Bit 6: Not Complete This Cycle   â”‚ = 0x77            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                              â”‚
â”‚  Result: Status = 0x77 (Binary: 01110111)                   â”‚
â”‚          â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”                          â”‚
â”‚          â”‚ 0â”‚ 1â”‚ 1â”‚ 1â”‚ 0â”‚ 1â”‚ 1â”‚ 1â”‚                          â”‚
â”‚          â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜                          â”‚
â”‚            â”‚                    â””â”€ Bit 0: Failed âœ“          â”‚
â”‚            â”‚                    â””â”€ Bit 1: Failed this cycle â”‚
â”‚            â”‚                    â””â”€ Bit 2: Pending âœ“         â”‚
â”‚            â”‚                                                 â”‚
â”‚            â””â”€ Bit 7: Severity (0 for now)                   â”‚
â”‚                                                              â”‚
â”‚  Simplified: Often displayed as 0x04 (Pending only)         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 2: Second Test Failure (Confirmation)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Previous State: Status = 0x04 (Pending)                    â”‚
â”‚                                                              â”‚
â”‚  Test Fails Again (2nd time)                                 â”‚
â”‚     â”‚                                                         â”‚
â”‚     â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Keep Bit 0: Test Failed (Current)    â”‚                   â”‚
â”‚  â”‚ Keep Bit 1: Test Failed This Cycle   â”‚                   â”‚
â”‚  â”‚ Clear Bit 2: No longer "pending"     â”‚                   â”‚
â”‚  â”‚ Set Bit 3: Confirmed DTC âœ“           â”‚                   â”‚
â”‚  â”‚ Keep Bit 4,5,6: Previous states      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                              â”‚
â”‚  Additional Actions:                                         â”‚
â”‚    â€¢ Capture Freeze Frame (if first confirmation)           â”‚
â”‚    â€¢ Illuminate MIL (Check Engine Light) - Set Bit 7        â”‚
â”‚    â€¢ Store to non-volatile memory                           â”‚
â”‚                                                              â”‚
â”‚  Result: Status = 0x09 (Confirmed + Active)                 â”‚
â”‚          Binary: 00001001                                   â”‚
â”‚          â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”                          â”‚
â”‚          â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚ 1â”‚ 0â”‚ 0â”‚ 1â”‚                          â”‚
â”‚          â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜                          â”‚
â”‚                    â”‚        â””â”€ Bit 0: Failed currently       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Bit 3: Confirmed             â”‚
â”‚                                                              â”‚
â”‚  Or: Status = 0x89 if MIL requested                         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 3: Test Pass (Fault Clears)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Previous State: Status = 0x09 (Confirmed + Active)         â”‚
â”‚                                                              â”‚
â”‚  Test Passes                                                 â”‚
â”‚     â”‚                                                         â”‚
â”‚     â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Clear Bit 0: No longer failing       â”‚                   â”‚
â”‚  â”‚ Keep Bit 3: Still confirmed          â”‚                   â”‚
â”‚  â”‚ Start aging counter                  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                              â”‚
â”‚  Result: Status = 0x08 (Confirmed but Inactive)             â”‚
â”‚          Binary: 00001000                                   â”‚
â”‚          â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”                          â”‚
â”‚          â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚ 1â”‚ 0â”‚ 0â”‚ 0â”‚                          â”‚
â”‚          â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜                          â”‚
â”‚                    â”‚                                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Bit 3: Still confirmed       â”‚
â”‚                                                              â”‚
â”‚  Note: MIL typically extinguishes after 3 consecutive       â”‚
â”‚        passes (but DTC remains stored)                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 4: Manual Clear (SID 0x14)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Previous State: Status = any value                          â”‚
â”‚                                                              â”‚
â”‚  Clear DTCs Command Received                                 â”‚
â”‚     â”‚                                                         â”‚
â”‚     â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Clear all status bits â†’ 0x00         â”‚                   â”‚
â”‚  â”‚ Delete freeze frame data             â”‚                   â”‚
â”‚  â”‚ Delete extended data                 â”‚                   â”‚
â”‚  â”‚ Extinguish MIL                       â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                              â”‚
â”‚  Result: Status = 0x00                                      â”‚
â”‚          Binary: 00000000                                   â”‚
â”‚          â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”                          â”‚
â”‚          â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚ 0â”‚                          â”‚
â”‚          â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜                          â”‚
â”‚                                                              â”‚
â”‚  Note: DTC removed from memory entirely                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Drive Cycle Impact on Status

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DRIVE CYCLE STATE TRANSITIONS                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Drive Cycle Definition: Ignition ON â†’ Engine running â†’ Ignition OFF

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  DAY 1, CYCLE 1: Fault First Detected                       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                              â”‚
â”‚  Ignition ON                                                 â”‚
â”‚     â†“                                                        â”‚
â”‚  Test runs â†’ FAILS                                           â”‚
â”‚     â†“                                                        â”‚
â”‚  Status: 0x04 (Pending)                                     â”‚
â”‚  MIL: OFF                                                    â”‚
â”‚     â†“                                                        â”‚
â”‚  Ignition OFF                                                â”‚
â”‚                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                              â”‚
â”‚  DAY 2, CYCLE 2: Fault Persists                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚                                                              â”‚
â”‚  Ignition ON                                                 â”‚
â”‚     â†“                                                        â”‚
â”‚  Test runs â†’ FAILS (2nd time)                                â”‚
â”‚     â†“                                                        â”‚
â”‚  Status: 0x09 (Confirmed + Active)                          â”‚
â”‚  MIL: ON ğŸ’¡                                                  â”‚
â”‚  Freeze Frame: Captured                                      â”‚
â”‚     â†“                                                        â”‚
â”‚  Ignition OFF                                                â”‚
â”‚                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                              â”‚
â”‚  DAY 3, CYCLE 3: Repair Made, Fault Cleared                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚
â”‚                                                              â”‚
â”‚  Technician clears DTCs (SID 0x14)                          â”‚
â”‚     â†“                                                        â”‚
â”‚  Status: 0x00                                                â”‚
â”‚  MIL: OFF                                                    â”‚
â”‚     â†“                                                        â”‚
â”‚  Ignition ON                                                 â”‚
â”‚     â†“                                                        â”‚
â”‚  Test runs â†’ PASSES âœ“                                        â”‚
â”‚     â†“                                                        â”‚
â”‚  Status: Remains 0x00                                        â”‚
â”‚  MIL: OFF                                                    â”‚
â”‚     â†“                                                        â”‚
â”‚  Ignition OFF                                                â”‚
â”‚     â†“                                                        â”‚
â”‚  Repair Verified âœ“                                           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Freeze Frame Capture Logic

### Capture Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FREEZE FRAME CAPTURE DECISION TREE                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Test Fails  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”Œâ”€â”€â”€â”€â”¤ Is DTC new?   â”‚â”€â”€â”€â”€â”
           â”‚    â”‚ (Pending)     â”‚    â”‚
           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
          YES                       NO
           â”‚                         â”‚
           â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Skip freeze â”‚          â”‚ Check: 2nd   â”‚
    â”‚ frame for   â”‚          â”‚ fail? (Conf) â”‚
    â”‚ pending     â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ DTCs        â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                          YES               NO
                           â”‚                 â”‚
                           â–¼                 â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Capture       â”‚  â”‚ Update      â”‚
                   â”‚ Freeze Frame  â”‚  â”‚ Status Only â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ”€â”€â”€â”€â”¤ Priority?     â”‚â”€â”€â”€â”€â”
              â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
              â”‚                         â”‚
        EMISSIONS                  NON-EMISSIONS
              â”‚                         â”‚
              â–¼                         â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Store in      â”‚         â”‚ Store in      â”‚
      â”‚ Slot 0        â”‚         â”‚ Next availableâ”‚
      â”‚ (Overwrite    â”‚         â”‚ slot          â”‚
      â”‚ previous if   â”‚         â”‚ (FIFO)        â”‚
      â”‚ needed)       â”‚         â”‚               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Freeze Frame Storage Rules:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚ RULE 1: One Freeze Frame per DTC                            â”‚
â”‚   â€¢ Each confirmed DTC gets ONE freeze frame                â”‚
â”‚   â€¢ Captured at FIRST confirmation                          â”‚
â”‚   â€¢ Not updated on subsequent failures                      â”‚
â”‚                                                              â”‚
â”‚ RULE 2: Emissions DTCs Have Priority                        â”‚
â”‚   â€¢ P-codes (emissions) stored in slot 0                    â”‚
â”‚   â€¢ Most recent emissions DTC overwrites previous           â”‚
â”‚   â€¢ Non-emissions DTCs stored in other slots                â”‚
â”‚                                                              â”‚
â”‚ RULE 3: FIFO for Non-Emissions                              â”‚
â”‚   â€¢ Oldest non-emissions freeze frame overwritten first     â”‚
â”‚   â€¢ When memory full, discard oldest                        â”‚
â”‚                                                              â”‚
â”‚ RULE 4: Clear with DTC                                      â”‚
â”‚   â€¢ Freeze frame deleted when DTC cleared                   â”‚
â”‚   â€¢ No orphaned freeze frames                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Capture Timing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FREEZE FRAME CAPTURE TIMING                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Timeline (Millisecond Resolution):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  T-500ms    T-250ms    T=0      T+250ms    T+500ms          â”‚
â”‚     â”‚          â”‚        â”‚          â”‚          â”‚              â”‚
â”‚     â–¼          â–¼        â–¼          â–¼          â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”             â”‚
â”‚  â”‚ OK â”‚    â”‚ OK â”‚   â”‚FAILâ”‚    â”‚FAILâ”‚    â”‚FAILâ”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”˜   â””â”€â”¬â”€â”€â”˜    â””â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”˜             â”‚
â”‚                       â”‚                                      â”‚
â”‚                  CAPTURE HERE!                               â”‚
â”‚                  at moment of                                â”‚
â”‚                  first detection                             â”‚
â”‚                       â”‚                                      â”‚
â”‚                       â–¼                                      â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚             â”‚ Snapshot State: â”‚                              â”‚
â”‚             â”‚ â€¢ RPM: 2450     â”‚                              â”‚
â”‚             â”‚ â€¢ Speed: 72km/h â”‚                              â”‚
â”‚             â”‚ â€¢ Temp: 89Â°C    â”‚                              â”‚
â”‚             â”‚ â€¢ Load: 45%     â”‚                              â”‚
â”‚             â”‚ â€¢ Time: Now     â”‚                              â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Capture Process Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Step 1: Fault Detected (0ms)                               â”‚
â”‚     â†“                                                        â”‚
â”‚  Step 2: Trigger Freeze Frame Logic (5-10ms)                â”‚
â”‚     â†“                                                        â”‚
â”‚  Step 3: Read All Required PIDs (10-50ms)                   â”‚
â”‚     â€¢ Engine RPM                                             â”‚
â”‚     â€¢ Vehicle Speed                                          â”‚
â”‚     â€¢ Coolant Temperature                                    â”‚
â”‚     â€¢ Calculated Load                                        â”‚
â”‚     â€¢ Fuel Trim (Short & Long)                              â”‚
â”‚     â€¢ MAF Reading                                            â”‚
â”‚     â€¢ Throttle Position                                      â”‚
â”‚     â€¢ etc. (up to 20+ parameters)                           â”‚
â”‚     â†“                                                        â”‚
â”‚  Step 4: Format Data Structure (5ms)                        â”‚
â”‚     â†“                                                        â”‚
â”‚  Step 5: Write to Non-Volatile Memory (100-200ms)           â”‚
â”‚     â†“                                                        â”‚
â”‚  Step 6: Update DTC Status to Confirmed (5ms)               â”‚
â”‚     â†“                                                        â”‚
â”‚  Total Time: ~150-300ms                                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Extended Data Management

### Extended Data Update Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXTENDED DATA RECORD UPDATES                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EVENT: DTC Confirmed (First Time)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Initialize All Extended Data Records:                       â”‚
â”‚                                                              â”‚
â”‚  Record 0x01: Occurrence Count = 1                          â”‚
â”‚  Record 0x02: Aging Counter = 0                             â”‚
â”‚  Record 0x03: Aged Counter = 0                              â”‚
â”‚  Record 0x04: Cumulative Time = 0                           â”‚
â”‚  Record 0x05: Odometer (First) = Current Odometer           â”‚
â”‚  Record 0x06: Odometer (Latest) = Current Odometer          â”‚
â”‚  Record 0x50+: Manufacturer Data (if applicable)            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EVENT: DTC Fails Again (Already Confirmed)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Update Extended Data Records:                               â”‚
â”‚                                                              â”‚
â”‚  Record 0x01: Occurrence Count++                            â”‚
â”‚               (Increment by 1)                               â”‚
â”‚                                                              â”‚
â”‚  Record 0x02: Aging Counter = 0                             â”‚
â”‚               (Reset because fault active)                   â”‚
â”‚                                                              â”‚
â”‚  Record 0x04: Cumulative Time += Duration                   â”‚
â”‚               (Add time fault was active)                    â”‚
â”‚                                                              â”‚
â”‚  Record 0x06: Odometer (Latest) = Current Odometer          â”‚
â”‚               (Update to current mileage)                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EVENT: Drive Cycle Ends (Ignition OFF) with Inactive DTC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Update Extended Data Records:                               â”‚
â”‚                                                              â”‚
â”‚  Record 0x02: Aging Counter++                               â”‚
â”‚               (Increment by 1 per cycle)                     â”‚
â”‚                                                              â”‚
â”‚  Check: Aging Counter >= Threshold?                          â”‚
â”‚    â”œâ”€ If YES (typically 40 cycles):                         â”‚
â”‚    â”‚    â€¢ Auto-erase DTC                                     â”‚
â”‚    â”‚    â€¢ Increment Record 0x03 (Aged Counter)              â”‚
â”‚    â”‚    â€¢ Free memory slot                                   â”‚
â”‚    â”‚                                                         â”‚
â”‚    â””â”€ If NO:                                                 â”‚
â”‚         â€¢ Keep DTC stored                                    â”‚
â”‚         â€¢ Continue aging process                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Aging Counter Visualization:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Cycle 1:  [â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡] 1/40  â”‚
â”‚  Cycle 10: [â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡] 10/40 â”‚
â”‚  Cycle 20: [â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡] 20/40 â”‚
â”‚  Cycle 39: [â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–¡] 39/40 â”‚
â”‚  Cycle 40: [â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– ] AUTO  â”‚
â”‚            DTC ERASED â†’ Record 0x03 (Aged Counter)++        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Memory Management Strategies

### DTC Storage Priority

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DTC MEMORY MANAGEMENT                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Memory Layout Example (20 DTC Slots):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Slot    â”‚ DTC Code        â”‚ Priority â”‚ Status          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ 00      â”‚ P0420           â”‚ HIGH (E) â”‚ 0x09 Confirmed  â”‚ â”‚
â”‚  â”‚ 01      â”‚ P0171           â”‚ HIGH (E) â”‚ 0x08 Inactive   â”‚ â”‚
â”‚  â”‚ 02      â”‚ P0300           â”‚ HIGH (E) â”‚ 0x09 Active     â”‚ â”‚
â”‚  â”‚ 03      â”‚ C1234           â”‚ MED (S)  â”‚ 0x08 Inactive   â”‚ â”‚
â”‚  â”‚ 04      â”‚ B1000           â”‚ HIGH (S) â”‚ 0x09 Active     â”‚ â”‚
â”‚  â”‚ 05      â”‚ U0100           â”‚ MED      â”‚ 0x04 Pending    â”‚ â”‚
â”‚  â”‚ 06-19   â”‚ [Empty]         â”‚ -        â”‚ -               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  Priority Legend:                                            â”‚
â”‚    E = Emissions-Related (Highest)                           â”‚
â”‚    S = Safety-Critical (High)                                â”‚
â”‚    MED = Functional (Medium)                                 â”‚
â”‚    LOW = Informational (Low)                                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Storage Algorithm (When Memory Full):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  New DTC Needs Storage                                       â”‚
â”‚        â”‚                                                     â”‚
â”‚        â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ Empty Slot? â”‚â”€â”€â”€â”€YESâ”€â”€â–º Store in next empty slot         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚         â”‚                                                    â”‚
â”‚        NO                                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚ New DTC Priority?      â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚           â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚        â”‚        â”‚            â”‚                           â”‚
â”‚ HIGH    MED      LOW       VERY LOW                         â”‚
â”‚  â”‚        â”‚        â”‚            â”‚                           â”‚
â”‚  â–¼        â–¼        â–¼            â–¼                           â”‚
â”‚ Find    Find    Find       Reject                           â”‚
â”‚ lowest  lowest  oldest     (Do not                          â”‚
â”‚ priority pending info DTC   store)                          â”‚
â”‚ DTC and DTC and or aged                                     â”‚
â”‚ replace replace DTC and                                     â”‚
â”‚         if none replace                                     â”‚
â”‚         exists                                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Replacement Decision Tree:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  Can Overwrite:                                              â”‚
â”‚    âœ“ Pending DTC (0x04) â†’ if new DTC is confirmed          â”‚
â”‚    âœ“ Inactive DTC (0x08) â†’ if new DTC is active            â”‚
â”‚    âœ“ Aged DTC (Aging >= 35) â†’ almost any new DTC           â”‚
â”‚    âœ“ Low priority â†’ if new DTC has higher priority         â”‚
â”‚                                                              â”‚
â”‚  Cannot Overwrite:                                           â”‚
â”‚    âœ— Emissions DTC â†’ unless new is also emissions           â”‚
â”‚    âœ— Safety-critical DTC â†’ unless new is safety-critical    â”‚
â”‚    âœ— Active MIL-ON DTC â†’ unless forced by regulation        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Testing Scenarios

### Scenario 1: Complete DTC Lifecycle Test

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TEST: Complete Lifecycle from Detection to Clear           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Phase 1: Initial State
  Precondition: No DTCs stored
  Expected: Status = 0x00 for all tests
  âœ“ Query: SID 0x19 0x01 0xFF â†’ Returns count = 0

Phase 2: Induce Fault (First Failure)
  Action: Disconnect O2 sensor heater
  Wait: 60 seconds (for test to run)
  Expected: Pending DTC created
  âœ“ Query: SID 0x19 0x02 0x04 â†’ Returns P0135 with status 0x04
  âœ“ Check: MIL still OFF
  âœ“ Verify: No freeze frame yet

Phase 3: Drive Cycle Ends
  Action: Turn ignition OFF
  Wait: 5 seconds
  Action: Turn ignition ON
  Expected: Pending DTC persists

Phase 4: Second Failure (Confirmation)
  Wait: 60 seconds (for test to run again)
  Expected: DTC confirmed
  âœ“ Query: SID 0x19 0x02 0x08 â†’ Returns P0135 with status 0x08 or 0x09
  âœ“ Check: MIL illuminated (ON)
  âœ“ Query: SID 0x19 0x04 P0 01 35 01 â†’ Returns freeze frame data
  âœ“ Verify: Freeze frame contains RPM, speed, temp, etc.
  âœ“ Query: SID 0x19 0x06 P0 01 35 0xFF â†’ Returns extended data
  âœ“ Verify: Occurrence count = 1

Phase 5: Repair and Clear
  Action: Reconnect O2 sensor heater
  Action: Clear DTCs via SID 0x14 0xFF FF FF
  Expected: Positive response 0x54
  âœ“ Query: SID 0x19 0x01 0xFF â†’ Returns count = 0
  âœ“ Check: MIL OFF
  âœ“ Verify: All data erased

Phase 6: Verification Drive
  Action: Drive vehicle (enable all tests)
  Wait: 10 minutes of varied driving
  Expected: All tests pass
  âœ“ Query: SID 0x19 0x02 0xFF â†’ Returns no DTCs
  âœ“ Check: MIL remains OFF
  âœ“ Verify: Repair successful

PASS: Complete lifecycle verified âœ“
```

### Scenario 2: Intermittent Fault Testing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TEST: Intermittent Fault Detection and Aging               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Setup: Simulate intermittent wiring fault

Cycle 1:
  Action: Induce fault (wiggle connector)
  Result: DTC P0171 confirmed, Status 0x09
  Extended Data: Occurrence = 1, Aging = 0
  âœ“ Freeze frame captured

Cycle 2-5: (Fault NOT present)
  Result: DTC remains, Status 0x08 (inactive)
  Extended Data: Occurrence = 1, Aging = 4
  âœ“ Aging counter incrementing

Cycle 6: (Fault returns)
  Action: Induce fault again
  Result: Status 0x09 (active again)
  Extended Data: Occurrence = 2, Aging = 0 (reset)
  âœ“ Freeze frame NOT updated (kept first one)

Cycle 7-46: (Fault NOT present)
  Result: Status 0x08, aging continues
  Extended Data: Occurrence = 2, Aging increments each cycle

Cycle 47:
  Expected: DTC auto-erased (aged out after 40 inactive cycles)
  âœ“ Query: SID 0x19 0x02 0xFF â†’ No P0171
  âœ“ Extended Data 0x03 (Aged Counter) = 1

Analysis: Intermittent fault correctly detected, tracked,
          and auto-cleared after sufficient aging period

PASS: Intermittent handling verified âœ“
```

### Scenario 3: Memory Full Condition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TEST: Memory Management When Storage Full                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Precondition: Fill memory with 20 DTCs (max capacity)
  Slots 0-9:  Emissions DTCs (P-codes), confirmed
  Slots 10-15: Chassis DTCs (C-codes), confirmed
  Slots 16-19: Body DTCs (B-codes), pending

Test A: New High-Priority Emissions DTC
  Action: Induce P0300 (Misfire - critical emissions)
  Expected: Overwrites oldest/lowest priority emissions DTC
  âœ“ Verify: New DTC stored in available slot
  âœ“ Verify: Pending B-code NOT removed (wrong category)
  âœ“ Verify: Emissions DTCs prioritized correctly

Test B: New Pending DTC (Low Priority)
  Action: Induce B1600 (HVAC fault)
  Expected: Replaces existing pending DTC (FIFO)
  âœ“ Verify: Oldest pending DTC removed
  âœ“ Verify: Confirmed DTCs NOT touched

Test C: New Safety-Critical DTC
  Action: Induce C0196 (ABS fault)
  Expected: Replaces lowest priority confirmed DTC
  âœ“ Verify: Safety DTC gets priority
  âœ“ Verify: Informational DTC removed if available

PASS: Memory management priorities verified âœ“
```

---

## Debugging Flowcharts

### Debugging: DTC Not Storing

```
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PROBLEM: Fault       â”‚
            â”‚ occurs but no DTC    â”‚
            â”‚ is stored            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”€â”€â”€â”€â”¤ Check: DTC setting   â”‚
       â”‚    â”‚ enabled? (SID 0x85)  â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚
   DISABLED          ENABLED
       â”‚               â”‚
       â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enable DTC  â”‚  â”‚ Check: Test      â”‚
â”‚ setting via â”‚  â”‚ execution?       â”‚
â”‚ SID 0x85 01 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                     â”‚         â”‚
                 NOT RUN     RUNNING
                     â”‚         â”‚
                     â–¼         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚Check testâ”‚ â”‚Check: Didâ”‚
              â”‚enabling  â”‚ â”‚test fail â”‚
              â”‚conditionsâ”‚ â”‚or pass?  â”‚
              â”‚met?      â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                           â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                          PASS      FAIL
                           â”‚         â”‚
                           â–¼         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚No DTC    â”‚ â”‚Check:    â”‚
                    â”‚expected  â”‚ â”‚Memory    â”‚
                    â”‚(working  â”‚ â”‚full?     â”‚
                    â”‚normally) â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                 â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                                YES       NO
                                 â”‚         â”‚
                                 â–¼         â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚Check     â”‚ â”‚Verify DTCâ”‚
                          â”‚priority  â”‚ â”‚creation  â”‚
                          â”‚rules     â”‚ â”‚logic     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Debugging: MIL Not Illuminating

```
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PROBLEM: DTC stored  â”‚
            â”‚ but MIL (Check       â”‚
            â”‚ Engine) not lighting â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”€â”€â”€â”€â”¤ Check: DTC status    â”‚
       â”‚    â”‚ bit 7 (MIL request)? â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚
      BIT 7=0        BIT 7=1
       â”‚               â”‚
       â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check: Is   â”‚  â”‚ Check: MIL       â”‚
â”‚ DTC type    â”‚  â”‚ circuit/bulb     â”‚
â”‚ emissions-  â”‚  â”‚ functional?      â”‚
â”‚ related?    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
       â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”      â”‚           â”‚
  â”‚         â”‚     BULB OK   BULB FAIL
 YES       NO      â”‚           â”‚
  â”‚         â”‚      â–¼           â–¼
  â–¼         â–¼  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚Check   â”‚ â”‚Replace â”‚
â”‚Shouldâ”‚ â”‚MIL not   â”‚â”‚MIL     â”‚ â”‚bulb or â”‚
â”‚set   â”‚ â”‚required  â”‚â”‚driver  â”‚ â”‚fix     â”‚
â”‚MIL   â”‚ â”‚for this  â”‚â”‚circuit â”‚ â”‚wiring  â”‚
â”‚(checkâ”‚ â”‚DTC type  â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚logic)â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”˜
```

### Debugging: Freeze Frame Not Captured

```
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PROBLEM: DTC         â”‚
            â”‚ confirmed but no     â”‚
            â”‚ freeze frame data    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”€â”€â”€â”€â”¤ Check: Was DTC       â”‚
       â”‚    â”‚ pending first?       â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚
      NO              YES
       â”‚               â”‚
       â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Freeze frameâ”‚  â”‚ Check: Did DTC   â”‚
â”‚ should have â”‚  â”‚ confirm on 2nd   â”‚
â”‚ been        â”‚  â”‚ failure?         â”‚
â”‚ captured on â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ 1st confirm â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    YES       NO
                     â”‚         â”‚
                     â–¼         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚Check:    â”‚ â”‚Still     â”‚
              â”‚Memory    â”‚ â”‚pending,  â”‚
              â”‚space for â”‚ â”‚wait for  â”‚
              â”‚freeze    â”‚ â”‚2nd fail  â”‚
              â”‚frame?    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                   â”‚
              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
             YES       NO
              â”‚         â”‚
              â–¼         â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚Check dataâ”‚ â”‚Memory    â”‚
       â”‚collectionâ”‚ â”‚full, old â”‚
       â”‚at fault  â”‚ â”‚freeze    â”‚
       â”‚moment    â”‚ â”‚frames    â”‚
       â”‚          â”‚ â”‚erased    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Best Practices Checklist

### Implementation Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DTC IMPLEMENTATION BEST PRACTICES                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DTC DETECTION:
  â˜ Implement proper diagnostic test conditions
  â˜ Define clear pass/fail thresholds
  â˜ Handle continuous vs. non-continuous tests correctly
  â˜ Implement debouncing for intermittent faults
  â˜ Validate sensor readings before fault declaration
  â˜ Consider environmental factors (temp, pressure, etc.)

STATUS BYTE MANAGEMENT:
  â˜ Update all 8 bits correctly per ISO 14229-1
  â˜ Implement pending â†’ confirmed logic (2-trip rule)
  â˜ Clear bit 0 when fault becomes inactive
  â˜ Maintain bit 3 (confirmed) until manual clear
  â˜ Set bit 7 (MIL request) for emissions DTCs
  â˜ Clear appropriate bits on ignition cycle changes

FREEZE FRAME HANDLING:
  â˜ Capture at first DTC confirmation (not pending)
  â˜ Do NOT update freeze frame on subsequent failures
  â˜ Store minimum required PIDs per regulations
  â˜ Prioritize emissions DTCs (slot 0)
  â˜ Implement FIFO for non-emissions DTCs
  â˜ Clear freeze frame when DTC cleared

EXTENDED DATA:
  â˜ Initialize all counters at DTC creation
  â˜ Increment occurrence counter on each failure
  â˜ Increment aging counter each inactive drive cycle
  â˜ Reset aging counter if fault becomes active again
  â˜ Auto-erase DTC after aging threshold (typically 40)
  â˜ Track odometer at first and latest occurrence
  â˜ Maintain cumulative fault active time

MEMORY MANAGEMENT:
  â˜ Define clear memory capacity (e.g., 20-50 DTCs)
  â˜ Implement priority-based storage (emissions > safety > functional)
  â˜ Use FIFO for same-priority DTCs when full
  â˜ Never overwrite higher priority with lower priority
  â˜ Store to non-volatile memory immediately
  â˜ Implement wear leveling for flash memory
  â˜ Validate memory integrity on power-up

MIL (CHECK ENGINE LIGHT):
  â˜ Illuminate for confirmed emissions DTCs
  â˜ Extinguish after 3 consecutive passes (typical)
  â˜ Keep DTC stored even if MIL off
  â˜ Flash MIL for critical faults (misfire)
  â˜ Implement proper MIL driver circuit diagnostics

REGULATORY COMPLIANCE:
  â˜ Support all required OBD-II emissions DTCs
  â˜ Implement P0xxx codes per SAE J2012
  â˜ Support readiness monitors (SID 0x01 0x01)
  â˜ Enable emissions testing (I/M readiness)
  â˜ Meet 2-trip confirmation requirement
  â˜ Support freeze frame for emissions DTCs
  â˜ Implement 40-cycle aging for emissions DTCs

TESTING:
  â˜ Test complete lifecycle (pending â†’ confirmed â†’ cleared)
  â˜ Verify aging logic with 40+ drive cycles
  â˜ Test memory full scenarios
  â˜ Verify priority-based storage
  â˜ Test freeze frame capture timing
  â˜ Validate extended data accuracy
  â˜ Test intermittent fault handling
  â˜ Verify MIL illumination rules
  â˜ Test manual clear (SID 0x14)
  â˜ Validate DTC format conversion (ISO â†” SAE)

DOCUMENTATION:
  â˜ Document all supported DTCs with descriptions
  â˜ Specify enabling conditions for each test
  â˜ Define pass/fail thresholds clearly
  â˜ List freeze frame PIDs included
  â˜ Document extended data records format
  â˜ Provide troubleshooting guides per DTC
  â˜ Include repair procedures
  â˜ Document priority levels
```

### Integration Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         INTEGRATION WITH UDS SERVICES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

WITH SID 0x19 (Read DTC Information):
  â˜ Support all required subfunctions (0x01, 0x02, 0x04, 0x06, etc.)
  â˜ Return correct status byte per DTC
  â˜ Filter DTCs by status mask correctly
  â˜ Format responses per ISO 14229-1
  â˜ Include status availability mask

WITH SID 0x14 (Clear DTC Information):
  â˜ Clear all DTCs when group 0xFFFFFF requested
  â˜ Support selective clear by group
  â˜ Erase freeze frames with DTCs
  â˜ Erase extended data with DTCs
  â˜ Extinguish MIL
  â˜ Reset readiness monitors
  â˜ Return positive response 0x54

WITH SID 0x85 (Control DTC Setting):
  â˜ Stop storing new DTCs when disabled
  â˜ Keep existing DTCs when disabled
  â˜ Allow reading DTCs when disabled
  â˜ Resume normal operation when re-enabled

WITH SID 0x01 (Request Current Powertrain Data):
  â˜ Provide MIL status (PID 0x01)
  â˜ Report DTC count (PID 0x01)
  â˜ Support freeze frame request (PID 0x02)
  â˜ Report readiness monitors (PID 0x01)

WITH SID 0x10 (Diagnostic Session Control):
  â˜ Allow DTC operations in all sessions
  â˜ Maintain DTC storage across session changes
  â˜ Support extended DTCs in extended session

WITH SID 0x27 (Security Access):
  â˜ Allow public DTC reading without security
  â˜ Protect proprietary DTCs behind security
  â˜ Define which DTCs require security access
```

---

**End of Document**

**Related Documents**:
- [DTC Fundamentals](./DTC_FUNDAMENTALS.md)
- [DTC Service Interactions](./DTC_SERVICE_INTERACTIONS.md)
- [SID 0x19: Read DTC Information](./SID_19_READ_DTC_INFORMATION.md)
- [SID 0x14: Clear DTC Information](./SID_14_CLEAR_DIAGNOSTIC_INFORMATION.md)
