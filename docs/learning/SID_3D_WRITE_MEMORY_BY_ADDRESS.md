# SID 0x3D (61): Write Memory By Address - Complete Learning Guide

**Document Version**: 2.0  
**Last Updated**: 2025-10-12  
**Format**: Visual Diagrams (No Code)  
**ISO Reference**: ISO 14229-1:2020 Section 11.4

---

## Table of Contents

1. [Overview](#overview)
2. [What is SID 0x3D?](#what-is-sid-0x3d)
3. [When to Use SID 0x3D](#when-to-use-sid-0x3d)
4. [Message Structure](#message-structure)
5. [Address and Length Format Identifier (ALFID)](#address-and-length-format-identifier-alfid)
6. [Request Message Format](#request-message-format)
7. [Response Message Format](#response-message-format)
8. [Negative Response Codes (NRCs)](#negative-response-codes-nrcs)
9. [Session and Security Requirements](#session-and-security-requirements)
10. [Memory Region Access Control](#memory-region-access-control)
11. [Write Operation Types](#write-operation-types)
12. [Write Verification](#write-verification)
13. [Common Use Cases](#common-use-cases)
14. [Troubleshooting](#troubleshooting)
15. [Quick Reference](#quick-reference)
16. [ISO 14229-1 Compliance](#iso-14229-1-compliance)

---

## Overview

### Purpose

SID 0x3D (Write Memory By Address) allows the tester to write raw binary data directly to specific memory addresses in the ECU. This service provides low-level memory access for operations like:

- Calibration data updates
- Configuration parameter writes
- Firmware patching (temporary fixes)
- Manufacturing data programming
- Memory testing and validation

**âš ï¸ CRITICAL**: This service provides **unrestricted memory access** when unlocked. Incorrect usage can **brick the ECU** or cause safety issues.

---

## What is SID 0x3D?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SID 0x3D OVERVIEW                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Service ID (SID): 0x3D                                    â”‚
â”‚  Decimal: 61                                               â”‚
â”‚  Response SID: 0x7D                                        â”‚
â”‚                                                            â”‚
â”‚  Purpose: Write binary data to specific memory addresses   â”‚
â”‚                                                            â”‚
â”‚  Access Level: ğŸ”´ HIGH SECURITY REQUIRED                  â”‚
â”‚                                                            â”‚
â”‚  Session Required: EXTENDED (0x03) or PROGRAMMING (0x02)   â”‚
â”‚  Security Required: âœ… YES (Level varies by region)       â”‚
â”‚                                                            â”‚
â”‚  Related Services:                                         â”‚
â”‚   - SID 0x23: Read Memory By Address (read operation)     â”‚
â”‚   - SID 0x2E: Write Data By Identifier (structured write) â”‚
â”‚   - SID 0x34: Request Download (flash programming)        â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## When to Use SID 0x3D

### âœ… APPROPRIATE Use Cases

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Calibration Data Updates                    â”‚
â”‚     â””â”€ Write new calibration values to RAM/     â”‚
â”‚        EEPROM after calculation                  â”‚
â”‚                                                  â”‚
â”‚  2. Configuration Parameter Programming          â”‚
â”‚     â””â”€ Set vehicle configuration during          â”‚
â”‚        manufacturing or repair                   â”‚
â”‚                                                  â”‚
â”‚  3. Manufacturing Data Writes                    â”‚
â”‚     â””â”€ Program serial numbers, dates, options    â”‚
â”‚                                                  â”‚
â”‚  4. Temporary Firmware Patches                   â”‚
â”‚     â””â”€ Apply hot-fixes to RAM for testing        â”‚
â”‚        (not permanent)                           â”‚
â”‚                                                  â”‚
â”‚  5. Memory Testing                               â”‚
â”‚     â””â”€ Write test patterns to verify memory      â”‚
â”‚        integrity                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âŒ INAPPROPRIATE Use Cases

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ Firmware Updates (Use SID 0x34/0x36/0x37)  â”‚
â”‚  âŒ Structured Data (Use SID 0x2E with DID)    â”‚
â”‚  âŒ Unsecured Production (requires security)   â”‚
â”‚  âŒ Safety-Critical Code Modification          â”‚
â”‚  âŒ Write-Protected Flash Regions              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Message Structure

### Complete Exchange Flow

```
  Tester                                    ECU
    â”‚                                        â”‚
    â”‚  REQUEST: Write Memory                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚  â”‚ 3D [ALFID] [Addr] [Data...]  â”‚     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
    â”‚                                        â”‚
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚                          â”‚ Validate â”‚ â”‚
    â”‚                          â”‚ Session  â”‚ â”‚
    â”‚                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                               â”‚       â”‚
    â”‚                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚
    â”‚                          â”‚ Check    â”‚ â”‚
    â”‚                          â”‚ Security â”‚ â”‚
    â”‚                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                               â”‚       â”‚
    â”‚                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚
    â”‚                          â”‚ Validate â”‚ â”‚
    â”‚                          â”‚ Address  â”‚ â”‚
    â”‚                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                               â”‚       â”‚
    â”‚                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚
    â”‚                          â”‚  Write   â”‚ â”‚
    â”‚                          â”‚  Memory  â”‚ â”‚
    â”‚                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                               â”‚       â”‚
    â”‚  RESPONSE: Success              â”‚     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚  â”‚ 7D [ALFID] [Addr]            â”‚     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                                        â”‚
```

---

## Address and Length Format Identifier (ALFID)

### ALFID Byte Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ALFID BYTE BREAKDOWN                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚   Bit 7-4: memorySize (Length of Data)                â”‚
â”‚   Bit 3-0: addressSize (Length of Address)            â”‚
â”‚                                                        â”‚
â”‚   Format: [memorySize][addressSize]                   â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Common ALFID Values

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALFID    â”‚ Addr Bytes  â”‚ Data Bytes   â”‚ Common Use    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0x14     â”‚ 1 byte      â”‚ 1 byte       â”‚ Test/Demo     â”‚
â”‚ 0x24     â”‚ 2 bytes     â”‚ 2 bytes      â”‚ Small writes  â”‚
â”‚ 0x44     â”‚ 4 bytes     â”‚ 4 bytes      â”‚ Balanced      â”‚
â”‚ 0x84     â”‚ 4 bytes     â”‚ 8 bytes      â”‚ Large data    â”‚
â”‚ 0xF4     â”‚ 4 bytes     â”‚ 15 bytes     â”‚ Max data      â”‚
â”‚ 0x48     â”‚ 4 bytes     â”‚ 8 bytes      â”‚ 64-bit systemsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ALFID Calculation Example

```
Example: Write 4 bytes to a 32-bit address

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Need to write:                         â”‚
â”‚  - Address: 0x20001000 (4 bytes)       â”‚
â”‚  - Data: 0x12345678 (4 bytes)          â”‚
â”‚                                        â”‚
â”‚ Step 1: Determine addressSize          â”‚
â”‚   â†’ 4 bytes = 0x4                      â”‚
â”‚                                        â”‚
â”‚ Step 2: Determine memorySize           â”‚
â”‚   â†’ 4 bytes = 0x4                      â”‚
â”‚                                        â”‚
â”‚ Step 3: Combine into ALFID             â”‚
â”‚   â†’ ALFID = (4 << 4) | 4 = 0x44        â”‚
â”‚                                        â”‚
â”‚ Result: ALFID = 0x44                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Message Format

### Basic Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WRITE MEMORY REQUEST                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  Byte 0:      SID (0x3D)                               â”‚
â”‚  Byte 1:      ALFID                                    â”‚
â”‚  Byte 2-N:    Memory Address (length = addressSize)   â”‚
â”‚  Byte N+1-M:  Memory Size (length = memorySize)       â”‚
â”‚  Byte M+1-Z:  Data Records (actual data to write)     â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 1: Write 4 Bytes to 32-bit Address

```
Request: Write 0x12345678 to address 0x20001000

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hex: 3D 44 20 00 10 00 00 00 00 04 12 34 56 78     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  3D        - SID (Write Memory By Address)          â”‚
â”‚  44        - ALFID (4-byte addr, 4-byte size)       â”‚
â”‚  20001000  - Memory Address (4 bytes)               â”‚
â”‚  00000004  - Memory Size (4 bytes) = write 4 bytes  â”‚
â”‚  12345678  - Data to Write (4 bytes)                â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 2: Write 8 Bytes to 32-bit Address

```
Request: Write calibration data to address 0x08001000

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hex: 3D 84 08 00 10 00 00 00 00 08 AA BB CC DD          â”‚
â”‚                                 11 22 33 44              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  3D        - SID (Write Memory By Address)               â”‚
â”‚  84        - ALFID (4-byte addr, 8-byte size)            â”‚
â”‚  08001000  - Memory Address (4 bytes)                    â”‚
â”‚  00000008  - Memory Size (8 bytes) = write 8 bytes       â”‚
â”‚  AA BB ... - Data to Write (8 bytes)                     â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 3: Small Write (1 Byte Address)

```
Request: Write 1 byte to address 0x50

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hex: 3D 11 50 01 FF                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  3D    - SID                        â”‚
â”‚  11    - ALFID (1-byte addr, size)  â”‚
â”‚  50    - Address (1 byte)           â”‚
â”‚  01    - Size (1 byte)              â”‚
â”‚  FF    - Data (1 byte)              â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Response Message Format

### Positive Response Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POSITIVE RESPONSE (0x7D)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  Byte 0:    Response SID (0x7D)                        â”‚
â”‚  Byte 1:    ALFID (echoed from request)                â”‚
â”‚  Byte 2-N:  Memory Address (echoed from request)       â”‚
â”‚                                                        â”‚
â”‚  Note: Data is NOT echoed back                         â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example Positive Response

```
Request:  3D 44 20 00 10 00 00 00 00 04 12 34 56 78
Response: 7D 44 20 00 10 00

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7D        - Positive Response SID  â”‚
â”‚ 44        - ALFID (echoed)         â”‚
â”‚ 20001000  - Address (echoed)       â”‚
â”‚                                    â”‚
â”‚ âœ“ Write successful                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Negative Response Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              NEGATIVE RESPONSE (0x7F)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  Byte 0:  Negative Response SID (0x7F)                 â”‚
â”‚  Byte 1:  Requested SID (0x3D)                         â”‚
â”‚  Byte 2:  NRC (Negative Response Code)                 â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Negative Response Codes (NRCs)

### NRC 0x13: Incorrect Message Length Or Invalid Format

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ NRC 0x13: Incorrect Message Length                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  What it means:                                        â”‚
â”‚   The request message has wrong length or ALFID        â”‚
â”‚   doesn't match actual data size                       â”‚
â”‚                                                        â”‚
â”‚  Common Causes:                                        â”‚
â”‚   â€¢ ALFID specifies 4 bytes but only 2 provided        â”‚
â”‚   â€¢ Missing data bytes                                 â”‚
â”‚   â€¢ Extra unexpected bytes                             â”‚
â”‚   â€¢ addressSize in ALFID doesn't match address length  â”‚
â”‚   â€¢ memorySize doesn't match data length               â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Wrong vs Correct Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ WRONG: ALFID Mismatch              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Request: 3D 44 20 00 10 00 12 34      â”‚
â”‚                                        â”‚
â”‚  Problem:                              â”‚
â”‚   ALFID 0x44 = 4-byte addr, 4-byte sizeâ”‚
â”‚   But only 2 data bytes provided       â”‚
â”‚                                        â”‚
â”‚  Response: 7F 3D 13                    â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… CORRECT: ALFID Matches Data             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  Request: 3D 44 20 00 10 00 00 00 00 04        â”‚
â”‚           12 34 56 78                          â”‚
â”‚                                                â”‚
â”‚  Correct:                                      â”‚
â”‚   ALFID 0x44 = 4-byte addr, 4-byte size        â”‚
â”‚   Address: 4 bytes âœ“                           â”‚
â”‚   Size: 4 bytes âœ“                              â”‚
â”‚   Data: 4 bytes âœ“                              â”‚
â”‚                                                â”‚
â”‚  Response: 7D 44 20 00 10 00                   â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### NRC 0x22: Conditions Not Correct

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ NRC 0x22: Conditions Not Correct                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  What it means:                                        â”‚
â”‚   ECU cannot perform the write operation due to        â”‚
â”‚   current conditions or state                          â”‚
â”‚                                                        â”‚
â”‚  Common Causes:                                        â”‚
â”‚   â€¢ Vehicle is running (engine ON)                     â”‚
â”‚   â€¢ Memory region is busy (another write in progress)  â”‚
â”‚   â€¢ Memory controller is locked                        â”‚
â”‚   â€¢ Write operation would corrupt data                 â”‚
â”‚   â€¢ Voltage too low/high for EEPROM write              â”‚
â”‚   â€¢ Temperature out of range                           â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Wrong vs Correct Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ WRONG: Writing While Engine ON     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Condition: Engine running             â”‚
â”‚                                        â”‚
â”‚  Request: 3D 44 20 00 10 00 ...        â”‚
â”‚                                        â”‚
â”‚  Problem:                              â”‚
â”‚   ECU cannot safely write to flash     â”‚
â”‚   while engine is running              â”‚
â”‚                                        â”‚
â”‚  Response: 7F 3D 22                    â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… CORRECT: Engine OFF Before Write   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Step 1: Turn OFF engine               â”‚
â”‚  Step 2: Wait for conditions stable    â”‚
â”‚  Step 3: Send write request            â”‚
â”‚                                        â”‚
â”‚  Request: 3D 44 20 00 10 00 ...        â”‚
â”‚                                        â”‚
â”‚  Condition: Engine OFF, voltage stable â”‚
â”‚                                        â”‚
â”‚  Response: 7D 44 20 00 10 00 âœ“         â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### NRC 0x31: Request Out Of Range

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ NRC 0x31: Request Out Of Range                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  What it means:                                        â”‚
â”‚   The memory address or size is invalid or             â”‚
â”‚   outside allowed boundaries                           â”‚
â”‚                                                        â”‚
â”‚  Common Causes:                                        â”‚
â”‚   â€¢ Address doesn't exist in memory map                â”‚
â”‚   â€¢ Address points to protected region (OS, ROM)       â”‚
â”‚   â€¢ Size causes read beyond region boundary            â”‚
â”‚   â€¢ Address + Size exceeds memory capacity             â”‚
â”‚   â€¢ Region is write-protected (flash code area)        â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Wrong vs Correct Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ WRONG: Write to ROM Region         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Request: 3D 44 00 00 00 00 ...        â”‚
â”‚           (trying to write to ROM)     â”‚
â”‚                                        â”‚
â”‚  Problem:                              â”‚
â”‚   Address 0x00000000 is in ROM         â”‚
â”‚   ROM is READ-ONLY                     â”‚
â”‚                                        â”‚
â”‚  Response: 7F 3D 31                    â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… CORRECT: Write to RAM/EEPROM       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Request: 3D 44 20 00 10 00 ...        â”‚
â”‚           (writing to RAM)             â”‚
â”‚                                        â”‚
â”‚  Correct:                              â”‚
â”‚   Address 0x20001000 is in RAM region  â”‚
â”‚   RAM is writable âœ“                    â”‚
â”‚                                        â”‚
â”‚  Response: 7D 44 20 00 10 00 âœ“         â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### NRC 0x33: Security Access Denied

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ NRC 0x33: Security Access Denied                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  What it means:                                        â”‚
â”‚   Security unlock is required but not performed,       â”‚
â”‚   or wrong security level unlocked                     â”‚
â”‚                                                        â”‚
â”‚  Common Causes:                                        â”‚
â”‚   â€¢ No security unlock performed (SID 0x27)            â”‚
â”‚   â€¢ Wrong security level unlocked                      â”‚
â”‚   â€¢ Security timeout occurred (went back to LOCKED)    â”‚
â”‚   â€¢ Trying to write protected memory without unlock    â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Wrong vs Correct Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ WRONG: No Security Unlock          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Tester â†’ ECU: 10 03 (Extended Session)â”‚
â”‚  ECU â†’ Tester: 50 03 âœ“                 â”‚
â”‚                                        â”‚
â”‚  Tester â†’ ECU: 3D 44 08 00 10 00 ...   â”‚
â”‚              (write to protected flash)â”‚
â”‚                                        â”‚
â”‚  Problem: No security unlock done      â”‚
â”‚                                        â”‚
â”‚  ECU â†’ Tester: 7F 3D 33 âŒ             â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… CORRECT: Security Unlocked First        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Tester â†’ ECU: 10 03                        â”‚
â”‚  ECU â†’ Tester: 50 03 âœ“                      â”‚
â”‚                                             â”‚
â”‚  Tester â†’ ECU: 27 01 (Request Seed)         â”‚
â”‚  ECU â†’ Tester: 67 01 12 34 56 78            â”‚
â”‚                                             â”‚
â”‚  Tester â†’ ECU: 27 02 AA BB CC DD (Send Key) â”‚
â”‚  ECU â†’ Tester: 67 02 âœ“                      â”‚
â”‚                                             â”‚
â”‚  Security: ğŸ”“ UNLOCKED                      â”‚
â”‚                                             â”‚
â”‚  Tester â†’ ECU: 3D 44 08 00 10 00 ...        â”‚
â”‚  ECU â†’ Tester: 7D 44 08 00 10 00 âœ“          â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### NRC 0x72: General Programming Failure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ NRC 0x72: General Programming Failure              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  What it means:                                        â”‚
â”‚   Memory write operation failed at hardware level      â”‚
â”‚                                                        â”‚
â”‚  Common Causes:                                        â”‚
â”‚   â€¢ EEPROM write error (bad cell)                      â”‚
â”‚   â€¢ Flash memory hardware failure                      â”‚
â”‚   â€¢ Voltage drop during write                          â”‚
â”‚   â€¢ Memory corruption detected                         â”‚
â”‚   â€¢ Write verification failed                          â”‚
â”‚   â€¢ Hardware fault in memory controller                â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Example Scenario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ PROBLEM: Write Verification Failed â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Tester â†’ ECU: 3D 44 08 00 10 00 ...   â”‚
â”‚                                        â”‚
â”‚  ECU Internal:                         â”‚
â”‚    1. Write 0x12345678 to 0x08001000   â”‚
â”‚    2. Read back: 0x12345600 âŒ         â”‚
â”‚       (Last byte corrupted)            â”‚
â”‚    3. Verification FAILED              â”‚
â”‚                                        â”‚
â”‚  ECU â†’ Tester: 7F 3D 72                â”‚
â”‚                                        â”‚
â”‚  Action: Check hardware, retry, or     â”‚
â”‚          replace memory module         â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### NRC 0x7F: Service Not Supported In Active Session

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ NRC 0x7F: Service Not Supported In Active Session  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  What it means:                                        â”‚
â”‚   SID 0x3D cannot be used in current diagnostic sessionâ”‚
â”‚                                                        â”‚
â”‚  Common Cause:                                         â”‚
â”‚   â€¢ Currently in DEFAULT session (0x01)                â”‚
â”‚   â€¢ Need EXTENDED (0x03) or PROGRAMMING (0x02)         â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Wrong vs Correct Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ WRONG: Default Session             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Current Session: DEFAULT (0x01)       â”‚
â”‚                                        â”‚
â”‚  Request: 3D 44 20 00 10 00 ...        â”‚
â”‚                                        â”‚
â”‚  Problem: SID 0x3D not allowed in      â”‚
â”‚           DEFAULT session              â”‚
â”‚                                        â”‚
â”‚  Response: 7F 3D 7F                    â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… CORRECT: Extended Session First    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  Step 1: Switch to Extended Session    â”‚
â”‚  Tester â†’ ECU: 10 03                   â”‚
â”‚  ECU â†’ Tester: 50 03 âœ“                 â”‚
â”‚                                        â”‚
â”‚  Step 2: Now write is allowed          â”‚
â”‚  Request: 3D 44 20 00 10 00 ...        â”‚
â”‚  Response: 7D 44 20 00 10 00 âœ“         â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Session and Security Requirements

### Session Requirements Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Memory Region       â”‚ Session  â”‚ Security      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAM (calibration)   â”‚ EXTENDED â”‚ Level 1 ğŸ”’    â”‚
â”‚  EEPROM (config)     â”‚ EXTENDED â”‚ Level 1 ğŸ”’    â”‚
â”‚  Flash (firmware)    â”‚ PROGRAM  â”‚ Level 3 ğŸ”’ğŸ”’ğŸ”’ â”‚
â”‚  OTP (serial#)       â”‚ PROGRAM  â”‚ Level 5 ğŸ”’ğŸ”’ğŸ”’ğŸ”’ğŸ”’â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Session State Behavior

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DEFAULT    â”‚  âŒ SID 0x3D NOT allowed
â”‚  Session 01  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       â”‚
       â”‚ 10 03
       â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EXTENDED   â”‚  âœ… SID 0x3D allowed (with security)
â”‚  Session 03  â”‚     - RAM writes (Level 1 security)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     - EEPROM writes (Level 1 security)

       â”‚
       â”‚ 10 02
       â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROGRAMMING  â”‚  âœ… SID 0x3D allowed (with security)
â”‚  Session 02  â”‚     - All memory types
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     - Flash, OTP (higher security)
```

### Security State Transitions

```
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚        LOCKED ğŸ”’                 â”‚
      â”‚   (Default state)                â”‚
      â”‚   SID 0x3D â†’ NRC 0x33            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  27 01 (Request Seed)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚     SEED REQUESTED ğŸ”            â”‚
      â”‚   (Waiting for key)              â”‚
      â”‚   SID 0x3D â†’ NRC 0x33            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  27 02 (Send Key)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚       UNLOCKED ğŸ”“                â”‚
      â”‚   (Security granted)             â”‚
      â”‚   SID 0x3D â†’ 7D (Success)        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ Session timeout OR
                    â”‚ 10 01 (Default Session)
                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚        LOCKED ğŸ”’                 â”‚
      â”‚   (Security reset)               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Memory Region Access Control

### Typical Memory Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ECU MEMORY MAP                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  0x00000000 - 0x0007FFFF  âŒ ROM (Read-Only)       â”‚
â”‚  â”‚  - Boot loader code                             â”‚
â”‚  â”‚  - Cannot write (NRC 0x31)                      â”‚
â”‚                                                     â”‚
â”‚  0x08000000 - 0x0807FFFF  ğŸ”’ Flash (Firmware)      â”‚
â”‚  â”‚  - Application code                             â”‚
â”‚  â”‚  - Requires PROGRAMMING session + Level 3       â”‚
â”‚                                                     â”‚
â”‚  0x20000000 - 0x2001FFFF  ğŸ”“ RAM (Calibration)     â”‚
â”‚  â”‚  - Runtime data                                 â”‚
â”‚  â”‚  - Requires EXTENDED session + Level 1          â”‚
â”‚  â”‚  - Most common write target                     â”‚
â”‚                                                     â”‚
â”‚  0x08080000 - 0x080807FF  ğŸ”’ EEPROM (Config)       â”‚
â”‚  â”‚  - Non-volatile config                          â”‚
â”‚  â”‚  - Requires EXTENDED session + Level 1          â”‚
â”‚                                                     â”‚
â”‚  0xFFFF0000 - 0xFFFF00FF  ğŸ”’ğŸ”’ğŸ”’ OTP (One-Time)    â”‚
â”‚  â”‚  - Serial numbers, VIN                          â”‚
â”‚  â”‚  - Requires PROGRAMMING session + Level 5       â”‚
â”‚  â”‚  - Can only write ONCE                          â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Address Validation Flow

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Write Requestâ”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”€â”¤ Address Valid?â”‚â”€â”€â”€â”€â”
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   NO                        YES
    â”‚                          â”‚
    â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚NRC 0x31â”‚       â”Œâ”€â”€â”€â”€â”¤ Region Type?   â”‚â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                ROM                        RAM/EEPROM
                 â”‚                          â”‚
                 â–¼                          â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  NRC 0x31  â”‚            â”‚ Check Sessionâ”‚
          â”‚(Read-Only) â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                               â”Œâ”€â”€â”€â”€â”¤ Session OK?  â”‚â”€â”€â”€â”€â”
                               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                              NO                       YES
                               â”‚                         â”‚
                               â–¼                         â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  NRC 0x7F  â”‚          â”‚Check Securityâ”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                                           â”Œâ”€â”€â”€â”€â”¤ Security OK? â”‚â”€â”€â”€â”€â”
                                           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                          NO                       YES
                                           â”‚                         â”‚
                                           â–¼                         â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  NRC 0x33  â”‚          â”‚  WRITE   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  MEMORY  â”‚
                                                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                                                                   â”‚
                                                            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                       â”Œâ”€â”€â”€â”€â”¤Write OK?   â”‚â”€â”€â”€â”€â”
                                                       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                                      NO                     YES
                                                       â”‚                       â”‚
                                                       â–¼                       â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚  NRC 0x72  â”‚        â”‚   7D (OK)  â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Write Operation Types

### RAM Write (Fastest)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RAM WRITE OPERATION                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Characteristics:                                  â”‚
â”‚   â€¢ Fast (microseconds)                            â”‚
â”‚   â€¢ Volatile (lost on power-off)                   â”‚
â”‚   â€¢ No wear leveling needed                        â”‚
â”‚   â€¢ No verification needed (reliable)              â”‚
â”‚                                                    â”‚
â”‚  Common Use:                                       â”‚
â”‚   â€¢ Temporary calibration changes                  â”‚
â”‚   â€¢ Runtime parameter tuning                       â”‚
â”‚   â€¢ Test mode activation                           â”‚
â”‚                                                    â”‚
â”‚  Timing:                                           â”‚
â”‚    Write â†’ Verify â†’ Response: < 1 ms               â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### EEPROM Write (Slow, Non-Volatile)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            EEPROM WRITE OPERATION                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Characteristics:                                  â”‚
â”‚   â€¢ Slow (1-5 ms per byte)                         â”‚
â”‚   â€¢ Non-volatile (survives power-off)              â”‚
â”‚   â€¢ Limited write cycles (~100k-1M)                â”‚
â”‚   â€¢ Requires verification                          â”‚
â”‚                                                    â”‚
â”‚  Common Use:                                       â”‚
â”‚   â€¢ Configuration data                             â”‚
â”‚   â€¢ Vehicle options                                â”‚
â”‚   â€¢ Learning values                                â”‚
â”‚                                                    â”‚
â”‚  Timing:                                           â”‚
â”‚    Write â†’ Verify â†’ Response: 5-50 ms              â”‚
â”‚                                                    â”‚
â”‚  âš ï¸ Warning: Don't write repeatedly (wears out)    â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flash Write (Most Restricted)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             FLASH WRITE OPERATION                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Characteristics:                                  â”‚
â”‚   â€¢ Must erase before write (block erase)          â”‚
â”‚   â€¢ Typically use SID 0x34/0x36/0x37 instead       â”‚
â”‚   â€¢ Limited write cycles (~10k-100k)               â”‚
â”‚   â€¢ High security required                         â”‚
â”‚                                                    â”‚
â”‚  Common Use:                                       â”‚
â”‚   â€¢ Temporary patches (hot-fixes)                  â”‚
â”‚   â€¢ Development/testing                            â”‚
â”‚                                                    â”‚
â”‚  âš ï¸ CAUTION: For production firmware updates,      â”‚
â”‚              use SID 0x34/0x36/0x37 instead        â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Write Verification

### Write-Verify-Retry Pattern

```
  Tester                                    ECU
    â”‚                                        â”‚
    â”‚  STEP 1: Write Data                    â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚
    â”‚  3D 44 20 00 10 00 00 00 00 04         â”‚
    â”‚     12 34 56 78                        â”‚
    â”‚                                        â”‚
    â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚  7D 44 20 00 10 00 âœ“                   â”‚
    â”‚                                        â”‚
    â”‚  STEP 2: Verify Write (Read Back)      â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>   â”‚
    â”‚  23 44 20 00 10 00 00 00 00 04         â”‚
    â”‚  (Read Memory By Address)              â”‚
    â”‚                                        â”‚
    â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚  63 12 34 56 78 âœ“                      â”‚
    â”‚                                        â”‚
    â”‚  STEP 3: Compare                       â”‚
    â”‚  Expected: 12 34 56 78                 â”‚
    â”‚  Actual:   12 34 56 78                 â”‚
    â”‚  Result:   âœ… MATCH                    â”‚
    â”‚                                        â”‚
```

### Verification Failure Handling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         WRITE VERIFICATION FLOWCHART               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚    1. Write Data (SID 0x3D)                        â”‚
â”‚         â”‚                                          â”‚
â”‚         â–¼                                          â”‚
â”‚    2. Read Back (SID 0x23)                         â”‚
â”‚         â”‚                                          â”‚
â”‚         â–¼                                          â”‚
â”‚    3. Compare Written vs Read                      â”‚
â”‚         â”‚                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                                    â”‚
â”‚    â”‚ Match?   â”‚                                    â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚         â”‚                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                     â”‚
â”‚   YES       NO                                     â”‚
â”‚    â”‚         â”‚                                     â”‚
â”‚    â–¼         â–¼                                     â”‚
â”‚  âœ… Done  Retry?                                   â”‚
â”‚            â”‚                                       â”‚
â”‚       â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                  â”‚
â”‚      YES       NO                                  â”‚
â”‚       â”‚         â”‚                                  â”‚
â”‚       â–¼         â–¼                                  â”‚
â”‚    Retry     âŒ FAIL                               â”‚
â”‚    (max 3x)   Report Error                         â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Common Use Cases

### Use Case 1: RAM Calibration Update

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scenario: Update engine calibration value         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Goal: Write new fuel map to RAM                   â”‚
â”‚                                                    â”‚
â”‚  Steps:                                            â”‚
â”‚   1. 10 03 â†’ Extended Session                      â”‚
â”‚   2. 27 01/02 â†’ Security unlock (Level 1)          â”‚
â”‚   3. 3D 44 20 00 10 00 ... â†’ Write 4 bytes         â”‚
â”‚   4. 23 44 20 00 10 00 ... â†’ Verify                â”‚
â”‚                                                    â”‚
â”‚  Address: 0x20001000 (RAM)                         â”‚
â”‚  Data: New calibration value                       â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Use Case 2: EEPROM Configuration Write

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scenario: Program vehicle options                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Goal: Write configuration to EEPROM               â”‚
â”‚                                                    â”‚
â”‚  Steps:                                            â”‚
â”‚   1. 10 03 â†’ Extended Session                      â”‚
â”‚   2. 27 01/02 â†’ Security unlock                    â”‚
â”‚   3. 3D 84 08 08 00 00 ... â†’ Write config          â”‚
â”‚   4. Wait 50ms (EEPROM write time)                 â”‚
â”‚   5. 23 84 08 08 00 00 ... â†’ Verify                â”‚
â”‚                                                    â”‚
â”‚  âš ï¸ Note: EEPROM writes are SLOW                   â”‚
â”‚           Allow time for completion                â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Use Case 3: Manufacturing Data Programming

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scenario: Program serial number (one-time)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Goal: Write serial number to OTP memory           â”‚
â”‚                                                    â”‚
â”‚  Steps:                                            â”‚
â”‚   1. 10 02 â†’ Programming Session                   â”‚
â”‚   2. 27 0B/0C â†’ High security unlock (Level 5)     â”‚
â”‚   3. 3D 84 FF FF 00 00 ... â†’ Write serial#         â”‚
â”‚   4. 23 84 FF FF 00 00 ... â†’ Verify                â”‚
â”‚   5. 11 01 â†’ ECU Reset                             â”‚
â”‚                                                    â”‚
â”‚  âš ï¸ CRITICAL: Can only write ONCE to OTP           â”‚
â”‚               Double-check data before writing!    â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Troubleshooting

### Problem: NRC 0x13 (Message Length)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Symptom: Getting NRC 0x13                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Check:                                            â”‚
â”‚   1. ALFID matches address size                    â”‚
â”‚      â€¢ 0x44 = 4-byte addr, 4-byte size             â”‚
â”‚   2. Data length matches memorySize                â”‚
â”‚   3. No missing or extra bytes                     â”‚
â”‚                                                    â”‚
â”‚  Debug Steps:                                      â”‚
â”‚   â€¢ Log request bytes                              â”‚
â”‚   â€¢ Count bytes manually                           â”‚
â”‚   â€¢ Verify ALFID calculation                       â”‚
â”‚   â€¢ Check for truncation in transmission           â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Problem: NRC 0x31 (Out Of Range)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Symptom: Getting NRC 0x31                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Check:                                            â”‚
â”‚   1. Address exists in memory map                  â”‚
â”‚   2. Region is writable (not ROM)                  â”‚
â”‚   3. Address + Size doesn't exceed boundary        â”‚
â”‚   4. Region allows writes in current session       â”‚
â”‚                                                    â”‚
â”‚  Common Mistakes:                                  â”‚
â”‚   âŒ Writing to ROM (0x00000000-0x0007FFFF)        â”‚
â”‚   âŒ Address beyond memory size                    â”‚
â”‚   âŒ Trying to write flash in Extended session     â”‚
â”‚                                                    â”‚
â”‚  Solution:                                         â”‚
â”‚   â€¢ Use memory map reference                       â”‚
â”‚   â€¢ Verify address range before writing            â”‚
â”‚   â€¢ Use correct session for memory type            â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Problem: NRC 0x33 (Security Denied)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Symptom: Getting NRC 0x33                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Check:                                            â”‚
â”‚   1. Security unlock performed (SID 0x27)          â”‚
â”‚   2. Correct security level unlocked               â”‚
â”‚   3. Security hasn't timed out                     â”‚
â”‚   4. No session change after unlock                â”‚
â”‚                                                    â”‚
â”‚  Debug Workflow:                                   â”‚
â”‚   1. Unlock security: 27 01/02                     â”‚
â”‚   2. Verify unlock: Should get 67 02               â”‚
â”‚   3. Immediately write: 3D ...                     â”‚
â”‚   4. Keep session active: 3E 00 (TesterPresent)    â”‚
â”‚                                                    â”‚
â”‚  Timing:                                           â”‚
â”‚   â€¢ Complete write within S3 timeout (5s)          â”‚
â”‚   â€¢ Send TesterPresent if taking longer            â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Problem: NRC 0x72 (Programming Failure)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Symptom: Getting NRC 0x72                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Possible Causes:                                  â”‚
â”‚   â€¢ Hardware failure (bad memory)                  â”‚
â”‚   â€¢ Voltage too low during write                   â”‚
â”‚   â€¢ Write verification failed internally           â”‚
â”‚   â€¢ Memory wear-out (too many cycles)              â”‚
â”‚                                                    â”‚
â”‚  Debug Steps:                                      â”‚
â”‚   1. Check battery voltage (>11.5V)                â”‚
â”‚   2. Retry write (may be transient)                â”‚
â”‚   3. Try different address (test memory)           â”‚
â”‚   4. Read memory first to verify accessibility     â”‚
â”‚                                                    â”‚
â”‚  If Persistent:                                    â”‚
â”‚   â€¢ May indicate hardware failure                  â”‚
â”‚   â€¢ Contact ECU manufacturer                       â”‚
â”‚   â€¢ May need ECU replacement                       â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Reference

### Service Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SID: 0x3D (61)                                    â”‚
â”‚  Name: WriteMemoryByAddress                        â”‚
â”‚  Response SID: 0x7D                                â”‚
â”‚                                                    â”‚
â”‚  Session: EXTENDED or PROGRAMMING                  â”‚
â”‚  Security: Required (level depends on region)      â”‚
â”‚                                                    â”‚
â”‚  Request:  3D [ALFID] [Addr] [Size] [Data]         â”‚
â”‚  Response: 7D [ALFID] [Addr]                       â”‚
â”‚  Error:    7F 3D [NRC]                             â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Common ALFID Values

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALFIDâ”‚ Addr   â”‚ Size     â”‚ Use Case      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0x44 â”‚ 4 bytesâ”‚ 4 bytes  â”‚ Most common   â”‚
â”‚ 0x84 â”‚ 4 bytesâ”‚ 8 bytes  â”‚ Large data    â”‚
â”‚ 0x24 â”‚ 2 bytesâ”‚ 2 bytes  â”‚ Small ECU     â”‚
â”‚ 0xF4 â”‚ 4 bytesâ”‚ 15 bytes â”‚ Maximum data  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### NRC Quick Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NRC  â”‚ Meaning                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0x13 â”‚ Wrong length/format               â”‚
â”‚ 0x22 â”‚ Conditions not correct            â”‚
â”‚ 0x31 â”‚ Address out of range              â”‚
â”‚ 0x33 â”‚ Security access denied            â”‚
â”‚ 0x72 â”‚ Programming failure               â”‚
â”‚ 0x7F â”‚ Wrong session                     â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Memory Region Quick Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Region     â”‚ Session  â”‚ Security Level â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RAM        â”‚ EXTENDED â”‚ Level 1        â”‚
â”‚ EEPROM     â”‚ EXTENDED â”‚ Level 1        â”‚
â”‚ Flash      â”‚ PROGRAM  â”‚ Level 3        â”‚
â”‚ OTP        â”‚ PROGRAM  â”‚ Level 5        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ISO 14229-1 Compliance

### Standard Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ISO 14229-1:2020                                  â”‚
â”‚  Section 11.4: WriteMemoryByAddress                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Key Requirements:                                 â”‚
â”‚   â€¢ ALFID format must match data                   â”‚
â”‚   â€¢ Security required for protected regions        â”‚
â”‚   â€¢ Response must echo ALFID and address           â”‚
â”‚   â€¢ NRC 0x31 for invalid addresses                 â”‚
â”‚   â€¢ NRC 0x72 for write failures                    â”‚
â”‚                                                    â”‚
â”‚  Related Sections:                                 â”‚
â”‚   â€¢ Section 11.3: ReadMemoryByAddress              â”‚
â”‚   â€¢ Section 11.6: RequestDownload                  â”‚
â”‚   â€¢ Section 9.3: SecurityAccess                    â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**End of SID 0x3D Main Theoretical Guide**
