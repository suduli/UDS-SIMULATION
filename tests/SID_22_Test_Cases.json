{
    "testSuite": "SID 22 - Read Data By Identifier",
    "description": "Comprehensive test cases for SID 0x22 implementation per ISO 14229-1:2020",
    "version": "1.0.0",
    "date": "2025-12-09",
    "testCases": [
        {
            "id": "SID22-001",
            "category": "Basic Single DID",
            "name": "Read VIN in DEFAULT Session",
            "description": "Read VIN (0xF190) which is available in DEFAULT session",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "bytes": [
                        {
                            "index": 0,
                            "value": "0xF1",
                            "description": "DID High Byte"
                        },
                        {
                            "index": 1,
                            "value": "0x90",
                            "description": "DID Low Byte"
                        },
                        {
                            "index": 2,
                            "type": "ASCII",
                            "length": 17,
                            "description": "17-byte VIN"
                        }
                    ]
                }
            },
            "passCriteria": "Response starts with 62 F1 90 and contains 17 ASCII bytes"
        },
        {
            "id": "SID22-002",
            "category": "Basic Single DID",
            "name": "Read ECU Hardware Number in DEFAULT Session",
            "description": "Read ECU HW Number (0xF191) which is public",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x91"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "bytes": [
                        {
                            "index": 0,
                            "value": "0xF1"
                        },
                        {
                            "index": 1,
                            "value": "0x91"
                        },
                        {
                            "index": 2,
                            "type": "ASCII",
                            "expected": "HW123456789"
                        }
                    ]
                }
            },
            "passCriteria": "Response: 62 F1 91 + ASCII 'HW123456789'"
        },
        {
            "id": "SID22-003",
            "category": "Multi-DID Support",
            "name": "Read Two DIDs - VIN and HW Number",
            "description": "Multi-DID request with VIN (0xF190) and HW Number (0xF191)",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90",
                    "0xF1",
                    "0x91"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "description": "Response contains both DIDs with their data",
                    "structure": "62 F1 90 [17 VIN bytes] F1 91 [11 HW bytes]"
                }
            },
            "passCriteria": "Response contains 62 F1 90 [VIN] F1 91 [HW] in sequence"
        },
        {
            "id": "SID22-004",
            "category": "Multi-DID Support",
            "name": "Read Three Public DIDs",
            "description": "Multi-DID request with VIN, HW Number, and SW Number",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90",
                    "0xF1",
                    "0x91",
                    "0xF1",
                    "0x94"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "structure": "62 F1 90 [VIN] F1 91 [HW] F1 94 [SW]"
                }
            },
            "passCriteria": "Response contains all three DIDs with their data"
        },
        {
            "id": "SID22-005",
            "category": "Session Validation - Failure",
            "name": "Read Sensor DID in DEFAULT Session (Should Fail)",
            "description": "Try to read Engine RPM (0x010C) which requires EXTENDED session",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0x01",
                    "0x0C"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x7F",
                "nrcName": "serviceNotSupportedInActiveSession"
            },
            "passCriteria": "Response: 7F 22 7F"
        },
        {
            "id": "SID22-006",
            "category": "Session Validation - Failure",
            "name": "Read Coolant Temp in DEFAULT Session (Should Fail)",
            "description": "Try to read Coolant Temp (0x0105) which requires EXTENDED session",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0x01",
                    "0x05"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x7F",
                "nrcName": "serviceNotSupportedInActiveSession"
            },
            "passCriteria": "Response: 7F 22 7F"
        },
        {
            "id": "SID22-007",
            "category": "Session Validation - Success",
            "name": "Read Engine RPM in EXTENDED Session",
            "description": "Read Engine RPM (0x010C) after entering EXTENDED session",
            "preconditions": {
                "session": "EXTENDED",
                "security": "LOCKED",
                "ignition": "ON",
                "setup": [
                    {
                        "sid": "0x10",
                        "data": [
                            "0x03"
                        ],
                        "description": "Enter EXTENDED session"
                    }
                ]
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0x01",
                    "0x0C"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "bytes": [
                        {
                            "index": 0,
                            "value": "0x01"
                        },
                        {
                            "index": 1,
                            "value": "0x0C"
                        },
                        {
                            "index": 2,
                            "type": "DATA",
                            "description": "RPM data bytes"
                        }
                    ]
                }
            },
            "passCriteria": "Response: 62 01 0C + RPM data"
        },
        {
            "id": "SID22-008",
            "category": "Session Validation - Success",
            "name": "Read Multiple Sensor DIDs in EXTENDED Session",
            "description": "Read Coolant Temp and Engine RPM in EXTENDED session",
            "preconditions": {
                "session": "EXTENDED",
                "security": "LOCKED",
                "ignition": "ON",
                "setup": [
                    {
                        "sid": "0x10",
                        "data": [
                            "0x03"
                        ]
                    }
                ]
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0x01",
                    "0x05",
                    "0x01",
                    "0x0C"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "structure": "62 01 05 [temp] 01 0C [RPM]"
                }
            },
            "passCriteria": "Response contains both sensor DIDs with data"
        },
        {
            "id": "SID22-009",
            "category": "Session Validation - Mixed",
            "name": "Multi-DID with Session Mismatch (All-or-Nothing)",
            "description": "Request VIN (ok in DEFAULT) + RPM (needs EXTENDED) in DEFAULT session",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90",
                    "0x01",
                    "0x0C"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x7F",
                "nrcName": "serviceNotSupportedInActiveSession"
            },
            "passCriteria": "Entire request fails with 7F 22 7F (no partial data)",
            "notes": "Demonstrates all-or-nothing behavior - first DID is valid but second fails, so no data returned"
        },
        {
            "id": "SID22-010",
            "category": "Error - Invalid DID",
            "name": "Request Non-Existent DID",
            "description": "Request DID 0x9999 which doesn't exist in ECU",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0x99",
                    "0x99"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x31",
                "nrcName": "requestOutOfRange"
            },
            "passCriteria": "Response: 7F 22 31"
        },
        {
            "id": "SID22-011",
            "category": "Error - Invalid DID",
            "name": "Multi-DID with One Invalid (All-or-Nothing)",
            "description": "Request VIN (valid) + 0x9999 (invalid)",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90",
                    "0x99",
                    "0x99"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x31",
                "nrcName": "requestOutOfRange"
            },
            "passCriteria": "Response: 7F 22 31 (no partial data for VIN)",
            "notes": "First DID is valid but second is invalid - entire request fails"
        },
        {
            "id": "SID22-012",
            "category": "Error - Message Length",
            "name": "Empty Data (No DIDs)",
            "description": "Send SID 0x22 with no DID bytes",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": []
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x13",
                "nrcName": "incorrectMessageLength"
            },
            "passCriteria": "Response: 7F 22 13"
        },
        {
            "id": "SID22-013",
            "category": "Error - Message Length",
            "name": "Incomplete DID (Odd Number of Bytes)",
            "description": "Send SID 0x22 with only 1 byte (incomplete DID)",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x13",
                "nrcName": "incorrectMessageLength"
            },
            "passCriteria": "Response: 7F 22 13"
        },
        {
            "id": "SID22-014",
            "category": "Error - Message Length",
            "name": "Incomplete DID in Multi-DID Request",
            "description": "Send valid DID + incomplete DID (3 bytes total)",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90",
                    "0xF1"
                ]
            },
            "expectedResponse": {
                "type": "NEGATIVE",
                "sid": "0x7F",
                "requestedSid": "0x22",
                "nrc": "0x13",
                "nrcName": "incorrectMessageLength"
            },
            "passCriteria": "Response: 7F 22 13"
        },
        {
            "id": "SID22-015",
            "category": "Edge Case - Response Length",
            "name": "Maximum Single DID Response",
            "description": "Read VIN which has 17-byte response (near maximum for single DID)",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62"
            },
            "passCriteria": "Response successfully returns all VIN data",
            "notes": "Verifies single large DID works correctly"
        },
        {
            "id": "SID22-016",
            "category": "Edge Case - Response Length",
            "name": "Multiple Large DIDs",
            "description": "Read multiple DIDs with string values to test response accumulation",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90",
                    "0xF1",
                    "0x91",
                    "0xF1",
                    "0x94",
                    "0xF1",
                    "0x95"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62"
            },
            "passCriteria": "Response contains all 4 DIDs with their full data (VIN + HW + SW + Date)",
            "notes": "Tests response buffer accumulation with ~50 bytes total"
        },
        {
            "id": "SID22-017",
            "category": "Security Validation - Framework",
            "name": "Read Public DID Without Security",
            "description": "Verify public DIDs (requiredSecurity: 0) work without unlock",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x90"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62"
            },
            "passCriteria": "VIN is readable without security unlock",
            "notes": "All current DIDs have requiredSecurity: 0, so they work when locked"
        },
        {
            "id": "SID22-018",
            "category": "Boundary - Minimum Request",
            "name": "Single DID Minimum Valid Request",
            "description": "Smallest valid request: SID + 2 bytes",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "request": {
                "sid": "0x22",
                "data": [
                    "0xF1",
                    "0x86"
                ]
            },
            "expectedResponse": {
                "type": "POSITIVE",
                "sid": "0x62",
                "dataPattern": {
                    "bytes": [
                        {
                            "index": 0,
                            "value": "0xF1"
                        },
                        {
                            "index": 1,
                            "value": "0x86"
                        },
                        {
                            "index": 2,
                            "value": "0x01",
                            "description": "Active session = DEFAULT"
                        }
                    ]
                }
            },
            "passCriteria": "Response: 62 F1 86 01"
        },
        {
            "id": "SID22-019",
            "category": "Session Transitions",
            "name": "Read DID After Session Change",
            "description": "Verify DID accessible after transitioning DEFAULT â†’ EXTENDED",
            "preconditions": {
                "session": "DEFAULT",
                "security": "LOCKED",
                "ignition": "ON"
            },
            "testSteps": [
                {
                    "step": 1,
                    "action": "Try read in DEFAULT",
                    "request": {
                        "sid": "0x22",
                        "data": [
                            "0x01",
                            "0x05"
                        ]
                    },
                    "expected": "NRC 7F 22 7F"
                },
                {
                    "step": 2,
                    "action": "Enter EXTENDED session",
                    "request": {
                        "sid": "0x10",
                        "data": [
                            "0x03"
                        ]
                    },
                    "expected": "Positive 50 03"
                },
                {
                    "step": 3,
                    "action": "Retry read in EXTENDED",
                    "request": {
                        "sid": "0x22",
                        "data": [
                            "0x01",
                            "0x05"
                        ]
                    },
                    "expected": "Positive 62 01 05 + data"
                }
            ],
            "passCriteria": "Step 1 fails, Step 3 succeeds after session change"
        },
        {
            "id": "SID22-020",
            "category": "All Sessions Coverage",
            "name": "Read VIN in All Sessions",
            "description": "VIN should be readable in DEFAULT, EXTENDED, and PROGRAMMING",
            "testSteps": [
                {
                    "step": 1,
                    "session": "DEFAULT",
                    "request": {
                        "sid": "0x22",
                        "data": [
                            "0xF1",
                            "0x90"
                        ]
                    },
                    "expected": "Positive 62 F1 90 + VIN"
                },
                {
                    "step": 2,
                    "session": "EXTENDED",
                    "setup": [
                        {
                            "sid": "0x10",
                            "data": [
                                "0x03"
                            ]
                        }
                    ],
                    "request": {
                        "sid": "0x22",
                        "data": [
                            "0xF1",
                            "0x90"
                        ]
                    },
                    "expected": "Positive 62 F1 90 + VIN"
                },
                {
                    "step": 3,
                    "session": "PROGRAMMING",
                    "setup": [
                        {
                            "sid": "0x10",
                            "data": [
                                "0x02"
                            ]
                        }
                    ],
                    "request": {
                        "sid": "0x22",
                        "data": [
                            "0xF1",
                            "0x90"
                        ]
                    },
                    "expected": "Positive 62 F1 90 + VIN"
                }
            ],
            "passCriteria": "VIN readable in all three sessions"
        }
    ],
    "testCategories": {
        "Basic Single DID": "Tests reading individual DIDs",
        "Multi-DID Support": "Tests reading multiple DIDs in one request",
        "Session Validation - Failure": "Tests NRC 0x7F for wrong session",
        "Session Validation - Success": "Tests successful reads in correct session",
        "Session Validation - Mixed": "Tests all-or-nothing behavior",
        "Error - Invalid DID": "Tests NRC 0x31 for non-existent DIDs",
        "Error - Message Length": "Tests NRC 0x13 for malformed requests",
        "Edge Case - Response Length": "Tests response buffer handling",
        "Security Validation - Framework": "Tests security framework (all current DIDs are public)",
        "Boundary - Minimum Request": "Tests minimum valid request size",
        "Session Transitions": "Tests behavior across session changes",
        "All Sessions Coverage": "Tests DIDs across all session types"
    },
    "nrcCoverage": {
        "0x13": "Incorrect Message Length - covered by SID22-012, 013, 014",
        "0x14": "Response Too Long - infrastructure ready, would need 100+ DIDs to trigger",
        "0x31": "Request Out Of Range - covered by SID22-010, 011",
        "0x7F": "Service Not Supported In Active Session - covered by SID22-005, 006, 009"
    },
    "notes": [
        "All test cases assume ignition is ON",
        "Security validation tests verify framework only - no secured DIDs configured yet",
        "Response Too Long (NRC 0x14) cannot be easily tested with current DIDs (would need 100+ DIDs)",
        "All-or-nothing behavior verified in SID22-009 and SID22-011",
        "Multi-DID support verified in SID22-003, 004, 008, 016"
    ]
}